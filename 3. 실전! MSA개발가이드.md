# 3. 실전! MSA개발가이드
- 널리 알려진 MSA 지식과 실제 현장에서의 지식과 거리가 있음
- 이 거리를 줄이기 위한 설명

## 1. 일반적인 시스템
- 누군가가 발명한 것이 아니다.
- 자생적으로 생겨난 시스템이 있었고, 그 시스템들의 공통점들을 추려서 MSA라고 소개한 것.
<img src="https://github.com/user-attachments/assets/afdf6b00-7908-4f32-8f2c-38d3d60745c7"></img>

### 당시에 소개된 내용들
<img src="https://github.com/user-attachments/assets/1756dd2e-81ea-4b81-848a-46b19a2105e2" ></img>
- 그러나 왜 하는지 구체적이지 않아서, 우리 서비스와 맞는지 잘 모르겠음
- 이 정도면 MSA라고 할 수 있나? 라는 기준이 애매함

### DB를 분리하는 거부터가 현장에서는 어려움
<img src="https://github.com/user-attachments/assets/e7ceadde-06a1-4aab-b0b1-4cf7081d522b" width="450px" height=""></img>
<img src="https://github.com/user-attachments/assets/402f36aa-df9a-4f72-ab9c-c5982a1739e6b" width="450px" height=""></img>

#### MSA 구조가 잘못된게 아니다. 보편적으로 사용하지 않았기 때문에 모르는 것이다.
<img src="https://github.com/user-attachments/assets/bc99b3cd-d0df-4b16-a1a1-21edba5339ac"></img>

### 단순하게 여러 데이터를 보여준다고 느려지는게 아니다.
#### 여러 데이터를 많이 조회할 때 느려진다.
<img src="https://github.com/user-attachments/assets/1369a55d-eedc-4251-b237-d37c5f26f0b3"></img>

#### 대표적인 예
<img src="https://github.com/user-attachments/assets/2bb9b5b1-0f74-404b-a92c-d734eb8e2603" width="450px" height=""></img>
<img src="https://github.com/user-attachments/assets/0e599f2f-efb7-47cc-b6b7-1212e2b9438d" width="450px" height=""></img>
- 모놀리식에서 해야한다면 우리는 어렵지 않게 생각해서 진행할 수 있다.

#### 하지만 MSA라면?
<img src="https://github.com/user-attachments/assets/8ad6ca22-93ab-43ea-aae5-ad57c2750397"></img>
- 상담 정보 조회 -> FK로 부가 정보 조회 하는 등의 과정을 거치면 느려질 수 있다.
![image](https://github.com/user-attachments/assets/bd7f6fd3-fea4-47d8-8919-9802e0530c55)
- 자주 초회하는 정보가 아니라 어쩌다 한번 조회하는 거면 API로 해도 상관없다.
- 그러나 자주 참조하면 문제가 된다.
- 자주 참조하지만 고정적이라 변하지 않는 데이터라면? (남자? 여자?) 튜닝 관점에서 이것저건 해볼 수 있다.
- 자주 참조하고 자주 바뀌면 문제가 된다 -> 그러나 이런건 생각보다 많지 않다.
    - 대표적으로 세션정보

#### 데이터 복제
![image](https://github.com/user-attachments/assets/27c957fb-63e1-4813-9f7f-58e1b9c24050)
- 복제한 데이터를 관리할 저장소, 관리 포인트가 늘어난다는 단점
- 그러나 원본 데이터에 문제가 되어도 상관이 없다는 장점
- 유의 사항: 원본을 스키마 통째로 복사X, 사용하기 좋은 형태로만 복제하여 사용

